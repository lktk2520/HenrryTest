import{d as H,o as a,c as n,a as l,r as V,s as te,u as ae,b as oe,e as E,f as S,g as c,h as b,t as h,w as $,T as ne,F as g,i as D,j as k,v as le,k as se,l as F,m as r,n as ue,p as T,q as z,x as re}from"./index-9863b0c4.js";import{u as ce,P as de,C as J,A as P,D as ie,S as pe}from"./counter-5aecec9f.js";import{u as he,D as me}from"./Delete24Filled-746e31a4.js";const _e={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 28 28"},ve=l("g",{fill:"none"},[l("path",{d:"M14 9.5a4.5 4.5 0 1 0 0 9a4.5 4.5 0 0 0 0-9zM11 14a3 3 0 1 1 6 0a3 3 0 0 1-6 0zm10.71 8.395l-1.728-.759a1.72 1.72 0 0 0-1.542.086c-.467.27-.765.747-.824 1.284l-.208 1.88a.923.923 0 0 1-.703.796a11.67 11.67 0 0 1-5.412 0a.923.923 0 0 1-.702-.796l-.208-1.877a1.701 1.701 0 0 0-.838-1.281a1.694 1.694 0 0 0-1.526-.086l-1.728.759a.92.92 0 0 1-1.043-.215a12.064 12.064 0 0 1-2.707-4.672a.924.924 0 0 1 .334-1.016l1.527-1.128a1.7 1.7 0 0 0 0-2.74l-1.527-1.125a.924.924 0 0 1-.334-1.017A12.059 12.059 0 0 1 5.25 5.821a.92.92 0 0 1 1.043-.214l1.72.757a1.707 1.707 0 0 0 2.371-1.376l.21-1.878a.923.923 0 0 1 .715-.799c.881-.196 1.78-.3 2.704-.311c.902.01 1.8.115 2.68.311a.922.922 0 0 1 .715.8l.209 1.878a1.701 1.701 0 0 0 1.688 1.518c.233 0 .464-.049.68-.144l1.72-.757a.92.92 0 0 1 1.043.214a12.057 12.057 0 0 1 2.708 4.667a.924.924 0 0 1-.333 1.016l-1.525 1.127c-.435.32-.698.829-.698 1.37c0 .54.263 1.049.699 1.37l1.526 1.126c.316.234.45.642.334 1.017a12.065 12.065 0 0 1-2.707 4.667a.92.92 0 0 1-1.043.215zm-5.447-.198a3.162 3.162 0 0 1 1.425-1.773a3.22 3.22 0 0 1 2.896-.161l1.344.59a10.565 10.565 0 0 0 1.97-3.398l-1.189-.877v-.001a3.207 3.207 0 0 1-1.309-2.578c0-1.027.497-1.98 1.307-2.576l.002-.001l1.187-.877a10.56 10.56 0 0 0-1.971-3.397l-1.333.586l-.002.001c-.406.18-.843.272-1.286.272a3.202 3.202 0 0 1-3.178-2.852v-.002l-.163-1.46a11.476 11.476 0 0 0-1.95-.193c-.674.009-1.33.074-1.975.193l-.163 1.461A3.207 3.207 0 0 1 7.41 7.737l-1.336-.588a10.558 10.558 0 0 0-1.971 3.397l1.19.877a3.201 3.201 0 0 1 0 5.155l-1.19.878a10.565 10.565 0 0 0 1.97 3.403l1.345-.59a3.194 3.194 0 0 1 2.878.16a3.2 3.2 0 0 1 1.579 2.411v.005l.162 1.464c1.297.255 2.63.255 3.927 0l.162-1.467c.024-.22.07-.437.138-.645z",fill:"currentColor"})],-1),ye=[ve],fe=H({name:"Settings28Regular",render:function(U,O){return a(),n("svg",_e,ye)}}),ge={class:"area"},ke={class:"board"},Se={class:"haveChecked"},Ce=l("span",null," 已有欄位：可拖曳排序 ",-1),Ve={class:"draggableArea"},De=["onDragstart","onDrop"],we={key:0},Te={class:"checkAble"},Ne=l("span",null," 待選欄位：可增加的欄位 ",-1),be={class:"checkArea"},Ue=["onClick"],Oe={key:0},Ae={class:"tableBox",id:"tableBox"},$e={id:"sort"},ze={key:0},Ie={key:3},Be={key:4},Me={key:5},Re={key:6},Ee={key:7},Fe={key:8},Je={key:0,title:"編號"},Pe={key:1,title:"名稱"},He=["name","onUpdate:modelValue"],je={key:2,title:"類別"},qe=["name","onUpdate:modelValue"],Le=re('<option value="" selected hidden>請選擇</option><option value="食">食</option><option value="衣">衣</option><option value="住">住</option><option value="行">行</option><option value="育">育</option><option value="樂">樂</option>',7),We=[Le],Ge={key:3,title:"地址"},Ke=["name","onUpdate:modelValue"],Qe={key:4,title:"開放時間"},Xe={class:"openTime"},Ye={class:"item"},Ze={class:"title"},xe=["onUpdate:modelValue"],et=["onUpdate:modelValue","name"],tt=l("span",null,"~",-1),at=["onUpdate:modelValue","name"],ot={key:5,title:"所在縣市"},nt=["name","onUpdate:modelValue"],lt=l("option",{value:"",selected:"",hidden:""},"請選擇",-1),st=["value"],ut={key:6,title:"區域"},rt=["name","onUpdate:modelValue"],ct=l("option",{value:"",selected:"",hidden:""},"請選擇",-1),dt=["value"],it={key:7,title:"備註"},pt=["name","onUpdate:modelValue"],ht={key:8,title:"刪除"},mt={class:"buttonBox"},gt=H({__name:"areaManagement",setup(j){const U=V(0),O=V(null);function q(o){U.value=o,O.value=v.value[o],console.log(o)}function L(o,t){A(o),v.value[U.value]=v.value[t],v.value[t]=O.value,console.log(t)}function A(o){return o.preventDefault(),o.stopPropagation(),!1}const W=he(),{area_data:I}=te(ce()),{t:d,locale:_t}=ae(),s=V([0,1,2,3,4,5,6,7,8]),v=V([{num:0,name:d("SerialNumber"),checked:!0},{num:1,name:d("Name"),checked:!0},{num:2,name:d("Category"),checked:!0},{num:3,name:d("Address"),checked:!0},{num:4,name:d("OpeningHours"),checked:!0},{num:5,name:d("County"),checked:!0},{num:6,name:d("Area"),checked:!0},{num:7,name:d("Remark"),checked:!0},{num:8,name:d("Delete"),checked:!0}]);function G(){if(N.value==!0){let o=[];v.value.forEach(t=>{t.checked==!0&&o.push(t.num)}),s.value=o,localStorage.setItem("areaOrder",JSON.stringify(v.value))}N.value=!N.value}const N=V(!1),B=V(null);function K(o){M.value=o}const M=V(),C=V([]);function Q(){C.value.push({index:C.value.length+1,name:"",type:"",address:"",openTime:[{day:"Monday",start:"",end:""},{day:"Tuesday",start:"",end:""},{day:"Wednesday",start:"",end:""},{day:"Thursday",start:"",end:""},{day:"Friday",start:"",end:""},{day:"Saturday",start:"",end:""},{day:"Sunday",start:"",end:""}],county:"",area:"",note:"",delete:!1}),setTimeout(()=>{let o=document.getElementById("tableBox");o.scrollTop=o.scrollHeight-o.offsetHeight},10)}async function X(){let o=[],t=1;C.value.forEach(e=>{e.delete==!1&&(e.index=t,t++,o.push(e))});let i=!0,y=[];o.forEach((e,m)=>{let _=["name","address","county"];for(let p=0;p<=2;p++)e[_[p]]==""&&(y.includes(e.index)||y.push(e.index),i=!1)}),i==!0?(localStorage.setItem("data",JSON.stringify(o)),C.value=JSON.parse(localStorage.getItem("data")),W.success("success")):alert(`請確認第${y}筆必填欄位都已填寫！`)}function Y(o){o.delete=!o.delete}function Z(){C.value=JSON.parse(localStorage.getItem("data"))}function x(o,t){o.splice(t,1)}function ee(o){o.push({day:"",start:"",end:""})}oe(()=>{Z();let o=[];localStorage.getItem("areaOrder")&&(v.value=JSON.parse(localStorage.getItem("areaOrder")),v.value.forEach(t=>{t.checked==!0&&o.push(t.num)}),s.value=o)});function R(o,t){document.querySelectorAll("#sort th").forEach(i=>{i.classList.contains("sort")&&i!=o.target&&(i.className="sort")}),o.target.className=="sort"||o.target.className=="sort drop"?(C.value.sort(function(i,y){return i[t]<y[t]?-1:i[t]>y[t]?1:0}),o.target.className="sort rise"):(C.value.sort(function(i,y){return i[t]<y[t]?1:i[t]>y[t]?-1:0}),o.target.className="sort drop")}return(o,t)=>{const i=E("n-icon"),y=E("templete");return a(),n("div",ge,[l("div",ke,[l("button",{type:"button",class:"columnSet",onClick:t[3]||(t[3]=e=>G())},[S(i,{component:c(fe),color:"white",size:"16"},null,8,["component"]),b(" "+h(N.value?"儲存設定":"欄位設定")+" ",1),S(ne,{name:"height"},{default:$(()=>[k(l("div",{class:"columnSetArea",onClick:t[2]||(t[2]=se(()=>{},["stop"]))},[l("div",Se,[Ce,l("div",Ve,[(a(!0),n(g,null,D(v.value,(e,m)=>(a(),F(y,null,{default:$(()=>[e.checked?(a(),n("div",{key:0,onDragstart:_=>q(m),onDragenter:t[0]||(t[0]=_=>A(_)),onDragover:t[1]||(t[1]=_=>A(_)),onDrop:_=>L(_,m),class:"item",draggable:"true"},[b(h(e.name)+" ",1),S(i,{component:c(J),color:"white",onClick:_=>e.checked=!1},null,8,["component","onClick"])],40,De)):r("",!0)]),_:2},1024))),256)),v.value.filter(e=>e.checked==!0).length==0?(a(),n("span",we,"無")):r("",!0)])]),l("div",Te,[Ne,l("div",be,[(a(!0),n(g,null,D(v.value,(e,m)=>(a(),F(y,null,{default:$(()=>[e.checked?r("",!0):(a(),n("div",{key:0,class:"item",onClick:_=>e.checked=!0},h(e.name),9,Ue))]),_:2},1024))),256)),v.value.filter(e=>e.checked==!1).length==0?(a(),n("span",Oe,"無")):r("",!0)])])],512),[[le,N.value]])]),_:1})]),l("div",Ae,[l("table",null,[l("thead",null,[l("tr",$e,[(a(!0),n(g,null,D(s.value.length,(e,m)=>(a(),n(g,null,[s.value[m]==0?(a(),n("th",ze,h(c(d)("SerialNumber")),1)):r("",!0),s.value[m]==1?(a(),n("th",{key:1,class:"sort",onClick:t[4]||(t[4]=_=>R(_,"name"))},h(c(d)("Name"))+"*",1)):r("",!0),s.value[m]==2?(a(),n("th",{key:2,class:"sort",onClick:t[5]||(t[5]=_=>R(_,"type"))},h(c(d)("Category")),1)):r("",!0),s.value[m]==3?(a(),n("th",Ie,h(c(d)("Address"))+"*",1)):r("",!0),s.value[m]==4?(a(),n("th",Be,h(c(d)("OpeningHours")),1)):r("",!0),s.value[m]==5?(a(),n("th",Me,h(c(d)("County"))+"*",1)):r("",!0),s.value[m]==6?(a(),n("th",Re,h(c(d)("Area")),1)):r("",!0),s.value[m]==7?(a(),n("th",Ee,h(c(d)("Remark")),1)):r("",!0),s.value[m]==8?(a(),n("th",Fe,h(c(d)("Delete")),1)):r("",!0)],64))),256))])]),l("tbody",null,[(a(!0),n(g,null,D(M.value,(e,m)=>(a(),n("tr",{key:m,class:ue([e.delete==!0?"delete":""])},[(a(!0),n(g,null,D(s.value.length,(_,p)=>(a(),n(g,null,[s.value[p]==0?(a(),n("td",Je,h(e.index)+". ",1)):r("",!0),s.value[p]==1?(a(),n("td",Pe,[k(l("input",{type:"text",name:"name"+p,"onUpdate:modelValue":u=>e.name=u},null,8,He),[[T,e.name]])])):r("",!0),s.value[p]==2?(a(),n("td",je,[k(l("select",{id:"",name:"type"+p,"onUpdate:modelValue":u=>e.type=u},We,8,qe),[[z,e.type]])])):r("",!0),s.value[p]==3?(a(),n("td",Ge,[k(l("input",{type:"text",name:"address"+p,"onUpdate:modelValue":u=>e.address=u},null,8,Ke),[[T,e.address]])])):r("",!0),s.value[p]==4?(a(),n("td",Qe,[l("div",Xe,[S(i,{onClick:u=>ee(e.openTime),size:"20",color:"gray",component:c(P)},null,8,["onClick","component"]),(a(!0),n(g,null,D(e.openTime,(u,f)=>(a(),n("div",Ye,[l("span",Ze,[k(l("input",{type:"text","onUpdate:modelValue":w=>u.day=w},null,8,xe),[[T,u.day]])]),k(l("input",{"onUpdate:modelValue":w=>e.openTime[f].start=w,type:"time",name:"start"+f,id:""},null,8,et),[[T,e.openTime[f].start]]),tt,k(l("input",{"onUpdate:modelValue":w=>e.openTime[f].end=w,type:"time",name:"end"+f,id:""},null,8,at),[[T,e.openTime[f].end]]),S(i,{size:"20",color:"gray",component:c(J),onClick:w=>x(e.openTime,f)},null,8,["component","onClick"])]))),256))])])):r("",!0),s.value[p]==5?(a(),n("td",ot,[k(l("select",{id:"",name:"county"+p,"onUpdate:modelValue":u=>e.county=u},[lt,(a(!0),n(g,null,D(Object.keys(c(I)),(u,f)=>(a(),n("option",{key:f,value:u},h(u),9,st))),128))],8,nt),[[z,e.county]])])):r("",!0),s.value[p]==6?(a(),n("td",ut,[k(l("select",{id:"",name:"area"+p,"onUpdate:modelValue":u=>e.area=u},[ct,(a(!0),n(g,null,D(c(I)[e.county],(u,f)=>(a(),n("option",{key:f,value:u},h(u),9,dt))),128))],8,rt),[[z,e.area]])])):r("",!0),s.value[p]==7?(a(),n("td",it,[k(l("input",{type:"text",name:"note"+p,"onUpdate:modelValue":u=>e.note=u},null,8,pt),[[T,e.note]])])):r("",!0),s.value[p]==8?(a(),n("td",ht,[S(i,{size:"30",color:"gray",depth:"2",title:e.delete==!0?"取消刪除":"刪除",component:e.delete==!0?c(ie):c(me),onClick:u=>Y(e)},null,8,["title","component","onClick"])])):r("",!0)],64))),256))],2))),128))])])]),l("div",mt,[l("button",{type:"button",class:"add",onClick:t[6]||(t[6]=e=>{Q(),B.value.slicePages(0,"last")})},[b(h(c(d)("Add"))+" ",1),S(i,{size:"20",color:"white",component:c(P)},null,8,["component"])]),S(de,{ref_key:"pageRef",ref:B,data:C.value,length:15,nowPageIndex:0,onSlice:K},null,8,["data"]),l("button",{type:"button",class:"save",onClick:t[7]||(t[7]=e=>X())},[b(h(c(d)("Save"))+" ",1),S(i,{size:"20",color:"white",component:c(pe)},null,8,["component"])])])])])}}});export{gt as default};
