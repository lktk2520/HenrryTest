import{d as M,s as $,u as A,r as V,b as R,e as w,c as r,a as e,t as s,g as n,F as f,i as g,h as k,f as y,o as p,n as E,j as _,p as v,q as S}from"./index-9863b0c4.js";import{u as P,P as H,A as b,C as J,D as j,S as q}from"./counter-5aecec9f.js";import{u as L,D as W}from"./Delete24Filled-746e31a4.js";const G={class:"area"},K={class:"board"},Q={class:"tableBox",id:"tableBox"},X={title:"編號"},Y={title:"名稱"},Z=["name","onUpdate:modelValue"],ee={title:"類別"},te=["name","onUpdate:modelValue"],oe=e("option",{value:"",selected:"",hidden:""},"請選擇",-1),ne=e("option",{value:"球類"},"球類",-1),ae=e("option",{value:"民俗體育"},"民俗體育",-1),le=e("option",{value:"健身"},"健身",-1),se=[oe,ne,ae,le],de={title:"地址"},ue=["name","onUpdate:modelValue"],ce={title:"開放時間"},ie={class:"openTime"},re={class:"item"},pe={class:"title"},_e=["onUpdate:modelValue"],he=["onUpdate:modelValue","name"],me=e("span",null,"~",-1),ye=["onUpdate:modelValue","name"],ve={title:"所在縣市"},fe=["name","onUpdate:modelValue"],ge=e("option",{value:"",selected:"",hidden:""},"請選擇",-1),Ve=["value"],Se={title:"區域"},Te=["name","onUpdate:modelValue"],Ue=e("option",{value:"",selected:"",hidden:""},"請選擇",-1),Ce=["value"],ke={title:"備註"},be=["name","onUpdate:modelValue"],xe={title:"刪除"},De={class:"buttonBox"},Fe=M({__name:"exportManagement",setup(Ie){const x=L(),{area_data:T}=$(P()),{t:u,locale:Be}=A(),U=V(null);function D(a){C.value=a}const C=V(),m=V([]);function I(){m.value.push({index:m.value.length+1,name:"",type:"",address:"",openTime:[{day:"Monday",start:"",end:""},{day:"Tuesday",start:"",end:""},{day:"Wednesday",start:"",end:""},{day:"Thursday",start:"",end:""},{day:"Friday",start:"",end:""},{day:"Saturday",start:"",end:""},{day:"Sunday",start:"",end:""}],county:"",area:"",note:"",delete:!1}),setTimeout(()=>{let a=document.getElementById("tableBox");a.scrollTop=a.scrollHeight-a.offsetHeight},10)}async function B(){let a=[],i=1;m.value.forEach(l=>{l.delete==!1&&(l.index=i,i++,a.push(l))});let h=!0,t=[];a.forEach((l,o)=>{let d=["name"];for(let c=0;c<=0;c++)l[d[c]]==""&&(t.includes(l.index)||t.push(l.index),h=!1)}),h==!0?(localStorage.setItem("export",JSON.stringify(a)),m.value=JSON.parse(localStorage.getItem("export")),x.success("success")):alert(`請確認第${t}筆必填欄位都已填寫！`)}function N(a){a.delete=!a.delete}function O(){localStorage.getItem("export")&&(m.value=JSON.parse(localStorage.getItem("export")))}function z(a,i){a.splice(i,1)}function F(a){a.push({day:"",start:"",end:""})}return R(()=>{O()}),(a,i)=>{const h=w("n-icon");return p(),r("div",G,[e("div",K,[e("div",Q,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,s(n(u)("SerialNumber")),1),e("th",null,s(n(u)("Name"))+"*",1),e("th",null,s(n(u)("Category")),1),e("th",null,s(n(u)("Address")),1),e("th",null,s(n(u)("OpeningHours")),1),e("th",null,s(n(u)("County")),1),e("th",null,s(n(u)("Area")),1),e("th",null,s(n(u)("Remark")),1),e("th",null,s(n(u)("Delete")),1)])]),e("tbody",null,[(p(!0),r(f,null,g(C.value,(t,l)=>(p(),r("tr",{key:l,class:E([t.delete==!0?"delete":""])},[e("td",X,s(t.index)+". ",1),e("td",Y,[_(e("input",{type:"text",name:"name"+l,"onUpdate:modelValue":o=>t.name=o},null,8,Z),[[v,t.name]])]),e("td",ee,[_(e("select",{id:"",name:"type"+l,"onUpdate:modelValue":o=>t.type=o},se,8,te),[[S,t.type]])]),e("td",de,[_(e("input",{type:"text",name:"address"+l,"onUpdate:modelValue":o=>t.address=o},null,8,ue),[[v,t.address]])]),e("td",ce,[e("div",ie,[y(h,{onClick:o=>F(t.openTime),size:"20",color:"gray",component:n(b)},null,8,["onClick","component"]),(p(!0),r(f,null,g(t.openTime,(o,d)=>(p(),r("div",re,[e("span",pe,[_(e("input",{type:"text","onUpdate:modelValue":c=>o.day=c},null,8,_e),[[v,o.day]])]),_(e("input",{"onUpdate:modelValue":c=>t.openTime[d].start=c,type:"time",name:"start"+d,id:""},null,8,he),[[v,t.openTime[d].start]]),me,_(e("input",{"onUpdate:modelValue":c=>t.openTime[d].end=c,type:"time",name:"end"+d,id:""},null,8,ye),[[v,t.openTime[d].end]]),y(h,{size:"20",color:"gray",component:n(J),onClick:c=>z(t.openTime,d)},null,8,["component","onClick"])]))),256))])]),e("td",ve,[_(e("select",{id:"",name:"county"+l,"onUpdate:modelValue":o=>t.county=o},[ge,(p(!0),r(f,null,g(Object.keys(n(T)),(o,d)=>(p(),r("option",{key:d,value:o},s(o),9,Ve))),128))],8,fe),[[S,t.county]])]),e("td",Se,[_(e("select",{id:"",name:"area"+l,"onUpdate:modelValue":o=>t.area=o},[Ue,(p(!0),r(f,null,g(n(T)[t.county],(o,d)=>(p(),r("option",{key:d,value:o},s(o),9,Ce))),128))],8,Te),[[S,t.area]])]),e("td",ke,[_(e("input",{type:"text",name:"note"+l,"onUpdate:modelValue":o=>t.note=o},null,8,be),[[v,t.note]])]),e("td",xe,[y(h,{size:"30",color:"gray",depth:"2",title:t.delete==!0?"取消刪除":"刪除",component:t.delete==!0?n(j):n(W),onClick:o=>N(t)},null,8,["title","component","onClick"])])],2))),128))])])]),e("div",De,[e("button",{type:"button",class:"add",onClick:i[0]||(i[0]=t=>{I(),U.value.slicePages(0,"last")})},[k(s(n(u)("Add"))+" ",1),y(h,{size:"20",color:"white",component:n(b)},null,8,["component"])]),y(H,{ref_key:"pageRef",ref:U,data:m.value,length:15,nowPageIndex:0,onSlice:D},null,8,["data"]),e("button",{type:"button",class:"save",onClick:i[1]||(i[1]=t=>B())},[k(s(n(u)("Save"))+" ",1),y(h,{size:"20",color:"white",component:n(q)},null,8,["component"])])])])])}}});export{Fe as default};
