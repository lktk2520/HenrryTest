import{d as M,s as $,u as A,r as V,b as R,e as w,c as r,a as e,t as s,g as o,F as v,i as g,h as k,f as y,o as p,n as E,j as _,p as f,q as S}from"./index-9863b0c4.js";import{u as P,P as H,A as b,C as J,D as j,S as q}from"./counter-5aecec9f.js";import{u as L,D as W}from"./Delete24Filled-746e31a4.js";const G={class:"area"},K={class:"board"},Q={class:"tableBox",id:"tableBox"},X={title:"編號"},Y={title:"名稱"},Z=["name","onUpdate:modelValue"],ee={title:"類別"},te=["name","onUpdate:modelValue"],ne=e("option",{value:"",selected:"",hidden:""},"請選擇",-1),oe=e("option",{value:"前端"},"前端",-1),ae=e("option",{value:"後端"},"後端",-1),le=[ne,oe,ae],se={title:"地址"},de=["name","onUpdate:modelValue"],ue={title:"開放時間"},ce={class:"openTime"},ie={class:"item"},re={class:"title"},pe=["onUpdate:modelValue"],_e=["onUpdate:modelValue","name"],me=e("span",null,"~",-1),he=["onUpdate:modelValue","name"],ye={title:"所在縣市"},fe=["name","onUpdate:modelValue"],ve=e("option",{value:"",selected:"",hidden:""},"請選擇",-1),ge=["value"],Ve={title:"區域"},Se=["name","onUpdate:modelValue"],Te=e("option",{value:"",selected:"",hidden:""},"請選擇",-1),Ue=["value"],Ce={title:"備註"},ke=["name","onUpdate:modelValue"],be={title:"刪除"},De={class:"buttonBox"},ze=M({__name:"learnManagement",setup(Ie){const D=L(),{area_data:T}=$(P()),{t:u,locale:xe}=A(),U=V(null);function I(a){C.value=a}const C=V(),h=V([]);function x(){h.value.push({index:h.value.length+1,name:"",type:"",address:"",openTime:[{day:"Monday",start:"",end:""},{day:"Tuesday",start:"",end:""},{day:"Wednesday",start:"",end:""},{day:"Thursday",start:"",end:""},{day:"Friday",start:"",end:""},{day:"Saturday",start:"",end:""},{day:"Sunday",start:"",end:""}],county:"",area:"",note:"",delete:!1}),setTimeout(()=>{let a=document.getElementById("tableBox");a.scrollTop=a.scrollHeight-a.offsetHeight},10)}async function B(){let a=[],i=1;h.value.forEach(l=>{l.delete==!1&&(l.index=i,i++,a.push(l))});let m=!0,t=[];a.forEach((l,n)=>{let d=["name"];for(let c=0;c<=0;c++)l[d[c]]==""&&(t.includes(l.index)||t.push(l.index),m=!1)}),m==!0?(localStorage.setItem("learn",JSON.stringify(a)),h.value=JSON.parse(localStorage.getItem("learn")),D.success("success")):alert(`請確認第${t}筆必填欄位都已填寫！`)}function N(a){a.delete=!a.delete}function O(){localStorage.getItem("learn")&&(h.value=JSON.parse(localStorage.getItem("learn")))}function z(a,i){a.splice(i,1)}function F(a){a.push({day:"",start:"",end:""})}return R(()=>{O()}),(a,i)=>{const m=w("n-icon");return p(),r("div",G,[e("div",K,[e("div",Q,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,s(o(u)("SerialNumber")),1),e("th",null,s(o(u)("Name"))+"*",1),e("th",null,s(o(u)("Category")),1),e("th",null,s(o(u)("Address")),1),e("th",null,s(o(u)("OpeningHours")),1),e("th",null,s(o(u)("County")),1),e("th",null,s(o(u)("Area")),1),e("th",null,s(o(u)("Remark")),1),e("th",null,s(o(u)("Delete")),1)])]),e("tbody",null,[(p(!0),r(v,null,g(C.value,(t,l)=>(p(),r("tr",{key:l,class:E([t.delete==!0?"delete":""])},[e("td",X,s(t.index)+". ",1),e("td",Y,[_(e("input",{type:"text",name:"name"+l,"onUpdate:modelValue":n=>t.name=n},null,8,Z),[[f,t.name]])]),e("td",ee,[_(e("select",{id:"",name:"type"+l,"onUpdate:modelValue":n=>t.type=n},le,8,te),[[S,t.type]])]),e("td",se,[_(e("input",{type:"text",name:"address"+l,"onUpdate:modelValue":n=>t.address=n},null,8,de),[[f,t.address]])]),e("td",ue,[e("div",ce,[y(m,{onClick:n=>F(t.openTime),size:"20",color:"gray",component:o(b)},null,8,["onClick","component"]),(p(!0),r(v,null,g(t.openTime,(n,d)=>(p(),r("div",ie,[e("span",re,[_(e("input",{type:"text","onUpdate:modelValue":c=>n.day=c},null,8,pe),[[f,n.day]])]),_(e("input",{"onUpdate:modelValue":c=>t.openTime[d].start=c,type:"time",name:"start"+d,id:""},null,8,_e),[[f,t.openTime[d].start]]),me,_(e("input",{"onUpdate:modelValue":c=>t.openTime[d].end=c,type:"time",name:"end"+d,id:""},null,8,he),[[f,t.openTime[d].end]]),y(m,{size:"20",color:"gray",component:o(J),onClick:c=>z(t.openTime,d)},null,8,["component","onClick"])]))),256))])]),e("td",ye,[_(e("select",{id:"",name:"county"+l,"onUpdate:modelValue":n=>t.county=n},[ve,(p(!0),r(v,null,g(Object.keys(o(T)),(n,d)=>(p(),r("option",{key:d,value:n},s(n),9,ge))),128))],8,fe),[[S,t.county]])]),e("td",Ve,[_(e("select",{id:"",name:"area"+l,"onUpdate:modelValue":n=>t.area=n},[Te,(p(!0),r(v,null,g(o(T)[t.county],(n,d)=>(p(),r("option",{key:d,value:n},s(n),9,Ue))),128))],8,Se),[[S,t.area]])]),e("td",Ce,[_(e("input",{type:"text",name:"note"+l,"onUpdate:modelValue":n=>t.note=n},null,8,ke),[[f,t.note]])]),e("td",be,[y(m,{size:"30",color:"gray",depth:"2",title:t.delete==!0?"取消刪除":"刪除",component:t.delete==!0?o(j):o(W),onClick:n=>N(t)},null,8,["title","component","onClick"])])],2))),128))])])]),e("div",De,[e("button",{type:"button",class:"add",onClick:i[0]||(i[0]=t=>{x(),U.value.slicePages(0,"last")})},[k(s(o(u)("Add"))+" ",1),y(m,{size:"20",color:"white",component:o(b)},null,8,["component"])]),y(H,{ref_key:"pageRef",ref:U,data:h.value,length:15,nowPageIndex:0,onSlice:I},null,8,["data"]),e("button",{type:"button",class:"save",onClick:i[1]||(i[1]=t=>B())},[k(s(o(u)("Save"))+" ",1),y(m,{size:"20",color:"white",component:o(q)},null,8,["component"])])])])])}}});export{ze as default};
